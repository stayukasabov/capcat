<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capcat - News Article Archiving System</title>
    <link rel="stylesheet" href="../css/design-system.css">
    <link rel="stylesheet" href="../css/main.css">
</head>
<body>
    <!-- Header -->
    {% include header.html %}


    <div class="doc-container">
        <div class="container">
            <div class="doc-content">

<div class="nav-breadcrumb"><a href="index.html">Documentation Home</a></div>
<h1>Capcat - News Article Archiving System</h1>

<p>A powerful, modular news article archiving system that fetches articles from 13+ sources, converts them to Markdown, and organizes them with media files.</p>

<h2> Features</h2>

<ul>
<li><h4>Multi-Source Support</h4> 13+ news sources including Hacker News, BBC, Nature, IEEE</li>
<li><h4>Modular Architecture</h4> Easy to add new sources with config-driven or custom implementations</li>
<li><h4>Media Handling</h4> Automatic download and organization of images, videos, and documents</li>
<li><h4>Flexible Output</h4> Markdown files with optional HTML generation</li>
<li><h4>Parallel Processing</h4> Concurrent article processing for performance</li>
<li><h4>Privacy Compliant</h4> Usernames anonymized, no personal data stored</li>
<li><h4>Configurable</h4> Command-line arguments, environment variables, and config files</li>
</ul>

<h2> Requirements</h2>

<ul>
<li>Python 3.8+</li>
<li>Internet connection for article fetching</li>
<li>~100MB disk space for dependencies</li>
</ul>

<h2> Installation</h2>

<h3>Quick Setup</h3>

<pre><code># Clone repository
git clone &lt;repository-url&gt;
cd capcat

# Setup environment
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# Verify installation
./capcat list sources
</code></pre>

<h3>Docker (Alternative)</h3>

<pre><code>docker build -t capcat .
docker run -v $(pwd)/output:/app/output capcat bundle tech --count 10
</code></pre>

<h2> Quick Start</h2>

<pre><code># Fetch 10 tech articles
./capcat bundle tech --count 10

# Fetch from specific sources
./capcat fetch hn,bbc --count 15 --media

# Single article processing
./capcat single https://example.com/article

# List available sources
./capcat list sources

# Show bundles
./capcat list bundles
</code></pre>

<h2> Usage</h2>

<h3>Command Line Interface</h3>

<pre><code># Basic usage
./capcat &lt;command&gt; [options]

# Commands
list sources           # Show all available sources
list bundles          # Show predefined source bundles
fetch &lt;sources&gt;       # Fetch from specific sources
bundle &lt;name&gt;         # Fetch from predefined bundle
single &lt;url&gt;          # Process single article

# Options
--count N             # Number of articles (default: 30)
--media               # Download videos/audio/documents
--html                # Generate HTML output
--output-dir DIR      # Custom output directory
--config FILE         # Custom config file
--debug               # Enable debug logging
</code></pre>

<h3>Available Sources</h3>

<h4>Technology:</h4>
<ul>
<li><code>hn</code> - Hacker News</li>
<li><code>lb</code> - Lobsters</li>
<li><code>iq</code> - InfoQ</li>
<li><code>ieee</code> - IEEE Spectrum</li>
<li><code>mashable</code> - Mashable</li>
</ul>

<h4>News:</h4>
<ul>
<li><code>bbc</code> - BBC News</li>
<li><code>guardian</code> - The Guardian</li>
</ul>

<h4>Science:</h4>
<ul>
<li><code>nature</code> - Nature News</li>
<li><code>scientificamerican</code> - Scientific American</li>
</ul>

<h4>AI/ML:</h4>
<ul>
<li><code>mitnews</code> - MIT News</li>
</ul>

<h4>Sports:</h4>
<ul>
<li><code>bbcsport</code> - BBC Sport</li>
</ul>

<h3>Predefined Bundles</h3>

<pre><code>./capcat bundle tech          # ieee + mashable
./capcat bundle techpro       # hn + lb + iq
./capcat bundle news          # bbc + guardian
./capcat bundle science       # nature + scientificamerican
./capcat bundle ai            # mitnews
./capcat bundle sports        # bbcsport
</code></pre>

<h2> Output Structure</h2>

<h3>Batch Processing</h3>
<div class="ascii-art">../News/news_DD-MM-YYYY/
‚îú‚îÄ‚îÄ Source_DD-MM-YYYY/
‚îÇ   ‚îî‚îÄ‚îÄ NN_Article_Title/
‚îÇ       ‚îú‚îÄ‚îÄ article.md
‚îÇ       ‚îú‚îÄ‚îÄ images/
‚îÇ       ‚îú‚îÄ‚îÄ files/
‚îÇ       ‚îî‚îÄ‚îÄ html/ (if --html)
</div>

<h3>Single Articles</h3>
<div class="ascii-art">../Capcats/cc_DD-MM-YYYY-Title/
‚îú‚îÄ‚îÄ article.md
‚îú‚îÄ‚îÄ images/
‚îî‚îÄ‚îÄ files/
</div>

<h2> Configuration</h2>

<h3>Command Line (Highest Priority)</h3>
<pre><code>./capcat fetch hn --count 20 --media
</code></pre>

<h3>Environment Variables</h3>
<pre><code>export CAPCAT_OUTPUT_DIR=&quot;/custom/path&quot;
export CAPCAT_DEFAULT_COUNT=50
</code></pre>

<h3>Config File (<code>capcat.yml</code>)</h3>
<pre><code>output_dir: &quot;/custom/path&quot;
default_count: 50
media_download: true
sources:
  hn:
    rate_limit: 5
</code></pre>

<h2> Development</h2>

<h3>Adding a New Source</h3>

<h3>Config-Driven (15-30 minutes)</h3>
<pre><code># sources/active/config_driven/configs/newsource.yaml
display_name: &quot;New Source&quot;
base_url: &quot;https://newsource.com/&quot;
category: tech
article_selectors: [&quot;.headline a&quot;]
content_selectors: [&quot;.article-content&quot;]
</code></pre>

<h3>Custom Implementation (2-4 hours)</h3>
<pre><code># sources/active/custom/newsource/source.py
from core.source_system.base_source import BaseSource

class NewSource(BaseSource):
    def get_articles(self, count=30):
        # Custom implementation
        pass
</code></pre>

<h3>Verification</h3>
<pre><code># Verify all sources work
./capcat list sources

# Verify specific source
./capcat fetch newsource --count 5

# Verify bundle
./capcat bundle tech --count 10
</code></pre>

<h2> Architecture</h2>

<div class="mermaid">graph TB
    CLI[CLI Interface] --> Main[Main App]
    Main --> Factory[Source Factory]
    Factory --> Sources[News Sources]
    Sources --> Fetcher[Article Fetcher]
    Fetcher --> Media[Media Processor]
    Media --> Format[Content Formatter]
    Format --> Output[File Output]
</div>

<h3 class="text-center">Use the free software <a href="https://www.drawio.com/" target="_blank" rel="noopener">Draw.io</a> to clearly visualize the mermaid diagrams.</h3>
<p class="text-center">Copy the mermaid code and from the drop-down menus select <h4>Arrange ‚Üí Insert ‚Üí Advanced ‚Üí Mermaid</h4>.</p>


<h4>Key Components:</h4>
<ul>
<li><h4>Source System</h4> Modular source management with auto-discovery</li>
<li><h4>Processing Pipeline</h4> Parallel article processing with error handling</li>
<li><h4>Media Handling</h4> Intelligent media download and organization</li>
<li><h4>Output Generation</h4> Markdown and HTML with structured directories</li>
</ul>

<h2> Common Issues &amp; Solutions</h2>

<h3>Module Not Found</h3>
<pre><code># Use wrapper (handles venv automatically)
./capcat list sources

# Or activate manually
source venv/bin/activate
</code></pre>

<h3>Source Failures</h3>
<ul>
<li>90% success rate is normal (anti-bot protection)</li>
<li>Some sources may have temporary issues</li>
<li>Check debug logs for details</li>
</ul>

<h3>Performance Issues</h3>
<pre><code># Reduce parallel workers
export CAPCAT_MAX_WORKERS=4

# Enable progress tracking
./capcat fetch hn --count 10 --debug
</code></pre>

<h2> Documentation</h2>

<ul>
<li><a href="docs/api/README.html">API Reference</a> - Complete API documentation</li>
<li><a href="docs/architecture/system.html">Architecture Guide</a> - System design details</li>
<li><a href="docs/developer/guide.html">Developer Guide</a> - Contributing and development</li>
<li><a href="docs/developer/sources.html">Source Development</a> - Adding new sources</li>
</ul>

<h2>ü§ù Contributing</h2>

<ol>
<li>Fork the repository</li>
<li>Create feature branch: <code>git checkout -b feature/new-feature</code></li>
<li>Follow PEP 8 coding standards</li>
<li>Update documentation</li>
<li>Submit pull request</li>
</ol>

<h2>License</h2>

<p>MIT-Style Non-Commercial License - see <a href="../LICENSE.txt">LICENSE.txt</a> file for details.</p>

<h4>Copyright (c) 2025 Stayu Kasabov</h4>

<ul>
<li>Non-commercial use only</li>
<li>Attribution required</li>
<li>Share-alike modifications</li>
<li>Contributions welcome</li>
</ul>

<h2>Acknowledgments</h2>

<ul>
<li>Built with Python 3.8+</li>
<li>Uses BeautifulSoup4 for HTML parsing</li>
<li>Requests library for HTTP handling</li>
<li>Threading for parallel processing</li>
</ul>

<h2> Support</h2>

<ul>
<li>Create an issue on GitHub</li>
<li>Check existing documentation</li>
<li>Review troubleshooting guide</li>
</ul>



<h4>Note</h4> This tool is designed for personal archiving and research purposes. Please respect robots.txt and terms of service for all sources.


<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({
    startOnLoad: true,
    theme: 'base',
    themeVariables: {
      // Primary colors from design system (Capcat orange palette)
      primaryColor: '#FFD4B7',           // --orange-200
      primaryTextColor: '#201419',       // --ink
      primaryBorderColor: '#F1540E',     // --orange-500 / --accent-primary

      // Line and edge colors
      lineColor: '#58444c',              // --ink-medium

      // Secondary colors
      secondaryColor: '#FFEADB',         // --orange-100
      tertiaryColor: '#f9f8ed',          // --accent-cream-primary

      // Text colors
      textColor: '#201419',              // --ink
      mainBkg: '#FAF8EE',                // --cream

      // Node styling
      nodeBorder: '#F1540E',             // --accent-primary
      clusterBkg: '#faf2e7',             // --accent-cream-light
      clusterBorder: '#D44400',          // --orange-600 / --accent-hover

      // Font
      fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',
      fontSize: '16px'
    },
    flowchart: {
      nodeSpacing: 50,
      rankSpacing: 50,
      padding: 15,
      useMaxWidth: true,
      htmlLabels: true,
      curve: 'basis'
    }
  });

  // Add copy buttons to Mermaid diagrams after rendering
  document.addEventListener('DOMContentLoaded', function() {
    const mermaidDivs = document.querySelectorAll('.mermaid');

    mermaidDivs.forEach(function(mermaidDiv) {
      // Get the original Mermaid source code
      const mermaidSource = mermaidDiv.textContent;

      // Create container wrapper
      const container = document.createElement('div');
      container.className = 'mermaid-container';

      // Create copy button
      const copyBtn = document.createElement('button');
      copyBtn.className = 'mermaid-copy-btn';
      copyBtn.textContent = 'Copy Mermaid Code';
      copyBtn.setAttribute('title', 'Copy diagram code for Draw.io, Mermaid Live, etc.');

      copyBtn.addEventListener('click', function() {
        navigator.clipboard.writeText(mermaidSource).then(function() {
          copyBtn.textContent = 'Copied!';
          copyBtn.classList.add('copied');

          setTimeout(function() {
            copyBtn.textContent = 'Copy Mermaid Code';
            copyBtn.classList.remove('copied');
          }, 2000);
        });
      });

      // Wrap the mermaid div in container and add button
      mermaidDiv.parentNode.insertBefore(container, mermaidDiv);
      container.appendChild(mermaidDiv);
      container.appendChild(copyBtn);
    });
  });
</script>
    <script src="../js/main.js"></script>

            </div>
        </div>
    </div>

    <!-- Footer -->
    {% include footer.html %}

    <!-- Back to Top Button -->
    <button id="backToTopBtn" title="Go to top">
        <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">
            <path d="M0 0h24v24H0V0z" fill="none"/>
            <path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41z"/>
        </svg>
    </button>  </body>
