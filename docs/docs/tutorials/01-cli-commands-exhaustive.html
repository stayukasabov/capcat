<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLI Commands Comprehensive Reference</title>
    <link rel="stylesheet" href="../../css/design-system.css">
    <link rel="stylesheet" href="../../css/main.css">
</head>
<body>
    <!-- Header -->
    {% include header.html %}


    <div class="doc-container">
        <div class="container">
            <div class="doc-content">

<div class="nav-breadcrumb"><a href="../index.html">Documentation Home</a> / tutorials</div>
<h1>CLI Commands Comprehensive Reference</h1>

<p>Complete documentation of EVERY command-line interface option, flag, parameter, and workflow in Capcat.</p>

<p>Source: Application/cli.py, Application/capcat.py</p>

<h2>Global Options</h2>

<p>These options work with ALL commands.</p>

<h3>--version, -v</h3>
<pre><code>./capcat --version
./capcat -v
</code></pre>
<p>Displays: <code>Capcat v2.0.0</code></p>

<h3>--verbose, -V</h3>
<pre><code>./capcat --verbose &lt;command&gt;
./capcat -V &lt;command&gt;
</code></pre>
<p>Enable verbose output logging. Shows:</p>
<ul>
<li>Detailed processing information</li>
<li>Debug-level messages</li>
<li>Source discovery details</li>
<li>Network requests</li>
<li>Article processing steps</li>
</ul>

<h4>Cannot be used with:</h4> --quiet

<h3>--quiet, -q</h3>
<pre><code>./capcat --quiet &lt;command&gt;
./capcat -q &lt;command&gt;
</code></pre>
<p>Suppress informational messages. Shows only:</p>
<ul>
<li>Warnings</li>
<li>Errors</li>
<li>Critical messages</li>
</ul>

<h4>Cannot be used with:</h4> --verbose

<h3>--config, -C FILE</h3>
<pre><code>./capcat --config custom.yml &lt;command&gt;
./capcat -C ~/.capcat/config.yml &lt;command&gt;
</code></pre>
<p>Specify custom configuration file path instead of default capcat.yml.</p>

<h4>Default location:</h4> Application/capcat.yml

<p>###</p>

<p> --log-file, -L FILE</p>
<pre><code>./capcat --log-file capcat.log &lt;command&gt;
./capcat -L logs/debug-$(date +%Y%m%d).log &lt;command&gt;
</code></pre>
<p>Write detailed logs to specified file. File logging includes:</p>
<ul>
<li>All log levels (DEBUG, INFO, WARNING, ERROR, CRITICAL)</li>
<li>Timestamps for every entry</li>
<li>Module/function names</li>
<li>Full stack traces for errors</li>
<li>Network request/response details</li>
</ul>

<h4>Log format:</h4> <code>[YYYY-MM-DD HH:MM:SS] [LEVEL] [module.function:line] Message</code>

<h2>Commands</h2>

<h3>single - Download Single Article</h3>

<p>Download and process a single article from any URL.</p>

<h4>Syntax:</h4>
<pre><code>./capcat single &lt;url&gt; [options]
</code></pre>

<h4>Required Arguments:</h4>
<ul>
<li><code>url</code> - Article URL to download (must be valid HTTP/HTTPS URL)</li>
</ul>

<h4>Options:</h4>

<h3>--output, -o DIR</h3>
<pre><code>./capcat single URL --output /path/to/output
./capcat single URL -o ../Capcats
</code></pre>
<p>Specify output directory for article.</p>

<h4>Default:</h4> Current directory (.)
<h4>Output structure:</h4>
<div class="ascii-art">&lt;output-dir&gt;/
└── cc_DD-MM-YYYY-Article-Title/
    ├── article.md
    ├── images/
    └── html/ (if --html specified)
</div>

<h3>--media, -M</h3>
<pre><code>./capcat single URL --media
./capcat single URL -M
</code></pre>
<p>Download ALL media types:</p>
<ul>
<li>Images (always downloaded, this flag adds others)</li>
<li>Videos (MP4, WebM, etc.)</li>
<li>Audio files (MP3, WAV, etc.)</li>
<li>Documents (PDF, DOCX, etc.)</li>
</ul>

<h4>Default:</h4> Images only
<h4>Storage:</h4> Files stored in <code>files/</code> subdirectory

<h3>--html, -H</h3>
<pre><code>./capcat single URL --html
./capcat single URL -H
</code></pre>
<p>Generate HTML version of article in addition to Markdown.</p>

<h4>Output:</h4> Article_Folder/html/article.html
<h4>Features:</h4>
<ul>
<li>Professional styling with themes</li>
<li>Navigation buttons</li>
<li>Responsive design</li>
<li>Dark/light mode support</li>
</ul>

<h3>--update, -U</h3>
<pre><code>./capcat single URL --update
./capcat single URL -U
</code></pre>
<p>Update existing article if it already exists.</p>

<h4>Behavior:</h4>
<ul>
<li>Overwrites existing article.md</li>
<li>Re-downloads media files</li>
<li>Updates timestamps</li>
<li>Preserves folder structure</li>
</ul>

<h4>Complete Examples:</h4>
<pre><code># Basic single article download
./capcat single https://example.com/article

# Download with all media and HTML
./capcat single https://bbc.com/news/article --media --html

# Update existing article verbosely
./capcat single URL --update --verbose

# Custom output with logging
./capcat single URL --output ~/Articles --log-file fetch.log
</code></pre>

<h3>fetch - Fetch from Specific Sources</h3>

<p>Fetch articles from one or more specific sources.</p>

<h4>Syntax:</h4>
<pre><code>./capcat fetch &lt;sources&gt; [options]
</code></pre>

<h4>Required Arguments:</h4>
<ul>
<li><code>sources</code> - Comma-separated list of source IDs (no spaces)</li>
</ul>

<h4>Available Sources:</h4> Use <code>./capcat list sources</code> to see all available source IDs.

<h4>Common Source IDs:</h4>
<ul>
<li><code>hn</code> - Hacker News</li>
<li><code>lb</code> - Lobsters</li>
<li><code>iq</code> - InfoQ</li>
<li><code>bbc</code> - BBC News</li>
<li><code>guardian</code> - The Guardian</li>
<li><code>nature</code> - Nature News</li>
<li><code>ieee</code> - IEEE Spectrum</li>
<li><code>mitnews</code> - MIT News</li>
<li><code>bbcsport</code> - BBC Sport</li>
</ul>

<h4>Options:</h4>

<h3>--count, -c N</h3>
<pre><code>./capcat fetch hn --count 10
./capcat fetch hn,bbc -c 50
</code></pre>
<p>Number of articles to fetch per source.</p>

<h4>Default:</h4> 30
<h4>Range:</h4> 1-1000 (practical limit varies by source)
<h4>Behavior:</h4> Each source fetches N articles independently

<h3>--output, -o DIR</h3>
<pre><code>./capcat fetch hn --output /path/to/output
./capcat fetch hn -o ../News
</code></pre>
<p>Specify output directory for articles.</p>

<h4>Default:</h4> Current directory (.)
<h4>Output structure:</h4>
<div class="ascii-art">&lt;output-dir&gt;/
└── news_DD-MM-YYYY/
    ├── Source1_DD-MM-YYYY/
    │   ├── 01_Article_Title/
    │   ├── 02_Article_Title/
    │   └── ...
    └── Source2_DD-MM-YYYY/
        └── ...
</div>

<h3>--media, -M</h3>
<pre><code>./capcat fetch hn,bbc --media
./capcat fetch nature -M
</code></pre>
<p>Download ALL media types (videos, audio, documents) in addition to images.</p>

<h4>Default:</h4> Images only
<h4>Impact:</h4> Significantly increases download time and disk usage

<h3>--html, -H</h3>
<pre><code>./capcat fetch hn --html
./capcat fetch hn,bbc -H
</code></pre>
<p>Generate HTML versions of all articles.</p>

<h4>Output:</h4> Each article gets html/article.html
<h4>Sources with comments:</h4> Also generates html/comments.html

<h3>--update, -U</h3>
<pre><code>./capcat fetch hn --update
./capcat fetch hn -U
</code></pre>
<p>Update existing articles if they already exist.</p>

<h4>Complete Examples:</h4>
<pre><code># Fetch 10 articles from Hacker News
./capcat fetch hn --count 10

# Fetch from multiple sources
./capcat fetch hn,lb,iq --count 20

# Fetch with all features
./capcat fetch bbc,guardian --count 15 --media --html --verbose

# Fetch to custom location with logging
./capcat fetch nature --count 5 --output ~/Science --log-file science.log
</code></pre>

<h3>bundle - Fetch from Source Bundles</h3>

<p>Fetch articles from predefined source bundles (groups of related sources).</p>

<h4>Syntax:</h4>
<pre><code>./capcat bundle &lt;bundle-name&gt; [options]
</code></pre>

<h4>Required Arguments:</h4>
<ul>
<li><code>bundle-name</code> - Name of predefined bundle</li>
</ul>

<h4>Available Bundles:</h4> Use <code>./capcat list bundles</code> to see all available bundles.

<h4>Predefined Bundles:</h4>
<ul>
<li><code>tech</code> - Technology news (ieee, mashable, gizmodo)</li>
<li><code>techpro</code> - Advanced tech news (hn, lb, iq)</li>
<li><code>news</code> - General news (bbc, guardian)</li>
<li><code>science</code> - Science news (nature, scientificamerican)</li>
<li><code>ai</code> - AI/ML news (mitnews, googleai, openai)</li>
<li><code>sports</code> - Sports news (bbcsport)</li>
<li><code>all</code> - All available sources</li>
</ul>

<h4>Options:</h4>

<h3>--count, -c N</h3>
<pre><code>./capcat bundle tech --count 10
./capcat bundle news -c 50
</code></pre>
<p>Number of articles to fetch per source in bundle.</p>

<h4>Default:</h4> 30
<h4>Behavior:</h4> Each source in bundle fetches N articles

<h3>--output, -o DIR</h3>
<pre><code>./capcat bundle tech --output /path/to/output
./capcat bundle tech -o ../News
</code></pre>
<p>Specify output directory.</p>

<h4>Default:</h4> Current directory (.)
<h4>Structure:</h4> Same as <code>fetch</code> command

<h3>--media, -M</h3>
<pre><code>./capcat bundle tech --media
./capcat bundle science -M
</code></pre>
<p>Download ALL media types for all sources in bundle.</p>

<h3>--html, -H</h3>
<pre><code>./capcat bundle tech --html
./capcat bundle news -H
</code></pre>
<p>Generate HTML for all articles from all sources.</p>

<h3>--all, -A</h3>
<pre><code>./capcat bundle --all
./capcat bundle -A --count 10
</code></pre>
<p>Fetch from ALL available bundles in order: techpro, tech, news, science, ai.</p>

<h4>Cannot be used with:</h4> bundle-name argument
<h4>Behavior:</h4> Processes bundles sequentially

<h3>--update, -U</h3>
<pre><code>./capcat bundle tech --update
./capcat bundle tech -U
</code></pre>
<p>Update existing articles in bundle.</p>

<h4>Complete Examples:</h4>
<pre><code># Fetch tech bundle
./capcat bundle tech

# Fetch with custom count
./capcat bundle news --count 20

# Fetch all bundles
./capcat bundle --all --count 10

# Full-featured bundle fetch
./capcat bundle science --count 15 --media --html --verbose

# All bundles with logging
./capcat bundle --all --log-file bundles-$(date +%Y%m%d).log
</code></pre>

<h3>list - List Sources and Bundles</h3>

<p>Display available sources, bundles, or both.</p>

<h4>Syntax:</h4>
<pre><code>./capcat list [what]
</code></pre>

<h4>Arguments:</h4>
<ul>
<li><code>what</code> - What to list: sources, bundles, or all (default: all)</li>
</ul>

<h4>Options:</h4> None (this command has no additional options)

<h4>Examples:</h4>

<h3>List All Sources</h3>
<pre><code>./capcat list sources
</code></pre>
<h4>Output format:</h4>
<pre><code>--- Available Sources ---

TECH:
  - ieee           IEEE Spectrum
  - mashable       Mashable
  - gizmodo        Gizmodo

TECHPRO:
  - hn             Hacker News
  - lb             Lobsters
  - iq             InfoQ

NEWS:
  - bbc            BBC News
  - guardian       The Guardian

SCIENCE:
  - nature         Nature News
  - scientificamerican Scientific American

AI:
  - mitnews        MIT News

SPORTS:
  - bbcsport       BBC Sport

Total: 11 sources
</code></pre>

<h3>List All Bundles</h3>
<pre><code>./capcat list bundles
</code></pre>
<h4>Output format:</h4>
<pre><code>--- Available Bundles ---

tech - Technology News
  Sources: ieee, mashable, gizmodo

techpro - Advanced Technology
  Sources: hn, lb, iq

news - General News
  Sources: bbc, guardian

science - Science News
  Sources: nature, scientificamerican

ai - AI &amp; Machine Learning
  Sources: mitnews

sports - Sports News
  Sources: bbcsport

Total: 6 bundles
</code></pre>

<h3>List Both</h3>
<pre><code>./capcat list all
./capcat list
</code></pre>
<p>Displays both sources and bundles sections.</p>

<h3>config - Configuration Management</h3>

<p>View or modify Capcat configuration.</p>

<h4>Syntax:</h4>
<pre><code>./capcat config [options]
</code></pre>

<h4>Options:</h4>

<h3>--show, -s</h3>
<pre><code>./capcat config --show
./capcat config -s
</code></pre>
<p>Display current configuration from capcat.yml.</p>

<h4>Output includes:</h4>
<ul>
<li>Network settings (timeouts, user agent)</li>
<li>Processing settings (workers, media flags)</li>
<li>Logging configuration</li>
<li>Output directories</li>
<li>Source-specific settings</li>
</ul>

<h3>--set KEY=VALUE</h3>
<pre><code>./capcat config --set max_workers=16
./capcat config --set download_images=true
</code></pre>
<p>Set configuration value.</p>

<h4>Cannot be used with:</h4> --show

<h4>Modifiable settings:</h4>
<ul>
<li><code>max_workers</code> - Number of parallel workers (1-32)</li>
<li><code>download_images</code> - Enable/disable image downloads (true/false)</li>
<li><code>download_videos</code> - Enable/disable video downloads (true/false)</li>
<li><code>connect_timeout</code> - Network connection timeout (seconds)</li>
<li><code>read_timeout</code> - Network read timeout (seconds)</li>
<li><code>user_agent</code> - Custom user agent string</li>
</ul>

<h4>Note:</h4> Changes are written to capcat.yml immediately.

<h4>Examples:</h4>
<pre><code># Show current config
./capcat config --show

# Increase workers
./capcat config --set max_workers=16

# Set custom user agent
./capcat config --set user_agent=&quot;MyBot/1.0&quot;
</code></pre>

<h3>add-source - Add New RSS Source</h3>

<p>Interactively add a new RSS-based source.</p>

<h4>Syntax:</h4>
<pre><code>./capcat add-source --url &lt;rss-feed-url&gt;
</code></pre>

<h4>Required Options:</h4>
<ul>
<li><code>--url</code> - URL of RSS feed to add</li>
</ul>

<h4>Interactive Workflow:</h4>
<ol>
<li>RSS feed inspection and validation</li>
<li>Source ID selection (auto-suggested from feed title)</li>
<li>Category selection from existing categories</li>
<li>Optional bundle assignment</li>
<li>Optional test fetch (recommended)</li>
</ol>

<h4>What It Creates:</h4>
<ul>
<li>YAML config file in: sources/active/config_driven/configs/</li>
<li>Filename: <code>&lt;source-id&gt;.yaml</code></li>
<li>Bundle entry (if selected)</li>
</ul>

<h4>Examples:</h4>
<pre><code># Add new RSS source
./capcat add-source --url https://techcrunch.com/feed/

# Interactive flow:
# 1. Inspecting RSS feed...
#    [OK] Feed &#x27;TechCrunch&#x27; found.
#
# 2. Configure New Source
#    Source ID: techcrunch
#    Category: tech
#    Add to bundle? Yes
#      Bundle: tech
#    [OK] Added &#x27;techcrunch&#x27; to bundle &#x27;tech&#x27;.
#
# 3. Running Test Fetch
#    Test fetch? Yes
#    [OK] Source added and verified successfully!
</code></pre>

<h4>Cancellation:</h4> Press Ctrl+C at any prompt to cancel operation.

<h3>remove-source - Remove Existing Sources</h3>

<p>Interactively remove one or more sources with safety features.</p>

<h4>Syntax:</h4>
<pre><code>./capcat remove-source [options]
</code></pre>

<h4>Interactive Mode (No Options):</h4>
<pre><code>./capcat remove-source
</code></pre>
<p>Launches interactive removal with checkbox selection:</p>
<ol>
<li>Displays all available sources</li>
<li>Select sources with spacebar</li>
<li>Review changes</li>
<li>Confirm removal</li>
<li>Automatic backup created</li>
<li>Sources removed</li>
</ol>

<h4>Options:</h4>

<h3>--dry-run, -n</h3>
<pre><code>./capcat remove-source --dry-run
./capcat remove-source -n
</code></pre>
<p>Preview changes without actually removing anything.</p>

<h4>Output shows:</h4>
<ul>
<li>Which files would be removed</li>
<li>Which bundle entries would be deleted</li>
<li>Backup that would be created</li>
<li>No actual changes made</li>
</ul>

<h3>--batch, -b FILE</h3>
<pre><code>./capcat remove-source --batch sources.txt
./capcat remove-source -b remove-list.txt
</code></pre>
<p>Remove sources listed in file (one source ID per line).</p>

<h4>File format:</h4>
<pre><code>techcrunch
oldnewssite
discontinued-source
</code></pre>

<h4>Behavior:</h4>
<ul>
<li>Reads file line by line</li>
<li>Validates all source IDs first</li>
<li>Confirms before removal (unless --force)</li>
<li>Creates backup</li>
</ul>

<h3>--undo, -u [BACKUP_ID]</h3>
<pre><code>./capcat remove-source --undo
./capcat remove-source --undo latest
./capcat remove-source --undo backup_20251025_143022
</code></pre>
<p>Restore sources from backup.</p>

<h4>Arguments:</h4>
<ul>
<li>No argument or <code>latest</code> - Restore most recent backup</li>
<li><code>BACKUP_ID</code> - Restore specific backup by ID</li>
</ul>

<h4>Backup ID format:</h4> <code>backup_YYYYMMDD_HHMMSS</code>

<h4>Restores:</h4>
<ul>
<li>All config files</li>
<li>Bundle definitions</li>
<li>Registry cache</li>
</ul>

<h3>--no-backup</h3>
<pre><code>./capcat remove-source --no-backup
./capcat remove-source --no-backup --force
</code></pre>
<p>Skip creating backup before removal.</p>

<h4>Warning:</h4> No undo capability without backup. Use with extreme caution.

<h3>--no-analytics</h3>
<pre><code>./capcat remove-source --no-analytics
</code></pre>
<p>Skip displaying usage analytics for sources.</p>

<h4>Default behavior:</h4> Shows usage statistics before removal

<h3>--force, -f</h3>
<pre><code>./capcat remove-source --force
./capcat remove-source -f --batch sources.txt
</code></pre>
<p>Skip all confirmation prompts.</p>

<h4>Use cases:</h4>
<ul>
<li>Automated scripts</li>
<li>CI/CD pipelines</li>
<li>Batch operations</li>
</ul>

<h4>Warning:</h4> No confirmation, immediate removal.

<h4>Complete Examples:</h4>
<pre><code># Interactive removal
./capcat remove-source

# Preview without removing
./capcat remove-source --dry-run

# Batch removal
./capcat remove-source --batch old-sources.txt

# Forced batch removal without backup
./capcat remove-source --force --no-backup --batch remove.txt

# Restore last removal
./capcat remove-source --undo

# Restore specific backup
./capcat remove-source --undo backup_20251025_120000
</code></pre>

<h4>Backup Locations:</h4>
<div class="ascii-art">Application/
└── .capcat-backups/
    ├── backup_20251025_143022/
    │   ├── configs/
    │   ├── bundles.yml
    │   └── manifest.json
    └── backup_20251025_150033/
        └── ...
</div>

<h3>generate-config - Generate Source Config</h3>

<p>Launch interactive wizard to create comprehensive YAML source configuration.</p>

<h4>Syntax:</h4>
<pre><code>./capcat generate-config [options]
</code></pre>

<h4>Interactive Wizard Steps:</h4>
<ol>
<li>Source ID and display name</li>
<li>Category selection</li>
<li>Base URL</li>
<li>Discovery method (RSS or HTML)</li>
<li>Article link selectors (CSS/XPath)</li>
<li>Content extraction selectors</li>
<li>Image processing configuration</li>
<li>Author/date extraction patterns</li>
<li>Rate limiting settings</li>
<li>Request timeout</li>
<li>Skip patterns</li>
<li>Template selection</li>
</ol>

<h4>Options:</h4>

<h3>--output, -o FILE</h3>
<pre><code>./capcat generate-config --output custom.yaml
./capcat generate-config -o /path/to/config.yaml
</code></pre>
<p>Specify output file path.</p>

<h4>Default:</h4> sources/active/config_driven/configs/&lt;source-id&gt;.yaml

<h4>Output Format:</h4>
<pre><code># Generated configuration
display_name: &quot;Example Source&quot;
base_url: &quot;https://example.com/&quot;
category: &quot;tech&quot;
timeout: 10.0
rate_limit: 1.0

rss_config:
  feed_url: &quot;https://example.com/feed.xml&quot;
  use_rss_content: true

article_selectors:
  - &quot;.headline a&quot;
  - &quot;.article-title a&quot;

content_selectors:
  - &quot;.article-content&quot;
  - &quot;.post-body&quot;

image_processing:
  selectors:
    - &quot;img&quot;
    - &quot;.content img&quot;
  url_patterns:
    - &quot;example.com/&quot;
  skip_selectors:
    - &quot;.sidebar img&quot;

skip_patterns:
  - &quot;/about&quot;
  - &quot;/contact&quot;
  - &quot;?utm_&quot;
</code></pre>

<h4>Examples:</h4>
<pre><code># Interactive generation
./capcat generate-config

# Save to custom location
./capcat generate-config --output ~/configs/newsource.yaml
</code></pre>

<h4>Next Steps After Generation:</h4>
<pre><code># Review generated config
cat sources/active/config_driven/configs/newsource.yaml

# Test source
./capcat fetch newsource --count 5

# Add to bundle (manual edit)
vim sources/active/bundles.yml
</code></pre>

<h3>catch - Interactive Mode</h3>

<p>Launch interactive menu interface for all Capcat operations.</p>

<h4>Syntax:</h4>
<pre><code>./capcat catch
</code></pre>

<h4>No options:</h4> This command has no additional flags or options.

<h4>Main Menu Options:</h4>
<ol>
<li>Catch articles from a bundle of sources</li>
<li>Catch articles from a list of sources</li>
<li>Catch from a single source</li>
<li>Catch a single article by URL</li>
<li>Manage Sources (add/remove/configure)</li>
<li>Exit</li>
</ol>

<h4>Navigation:</h4>
<ul>
<li>Arrow keys: Move between options</li>
<li>Enter: Select option</li>
<li>Ctrl+C: Cancel/go back</li>
</ul>

<h4>Sub-menu: Manage Sources</h4>
<ol>
<li>Add New Source from RSS Feed</li>
<li>Generate Custom Source Config</li>
<li>Remove Existing Sources</li>
<li>List All Sources</li>
<li>Test a Source</li>
<li>Back to Main Menu</li>
</ol>

<h4>Terminal Output:</h4>
<div class="ascii-art">      ____
    / ____|                     _
   | |     __ _ _ __   ___ __ _| |_
   | |    / _  |  _ \ / __/ _  | __|
   | |___| (_| | |_) | (_| (_| | |_
    \_____\__,_|  __/ \___\__,_|\__|
               | |
               |_|

  What would you like me to do?

  &gt; Catch articles from a bundle of sources
    Catch articles from a list of sources
    Catch from a single source
    Catch a single article by URL
    Manage Sources (add/remove/configure)
    Exit

   (Use arrow keys to navigate)
</div>

<h4>Example Session:</h4>
<pre><code>$ ./capcat catch

# User selects: &quot;Catch articles from a bundle of sources&quot;
# System shows bundle list, user selects &quot;tech&quot;
# System asks: &quot;Generate HTML for web browsing?&quot;
# User selects: &quot;Yes&quot;

--------------------
SUMMARY
Action: bundle
Bundle: tech
Generate HTML: true
--------------------

Executing command...
[Article processing begins]
</code></pre>

<h4>See:</h4> docs/tutorials/02-interactive-mode-exhaustive.md for complete interactive mode documentation.

<h2>Command Combinations</h2>

<h3>Typical Workflows</h3>

<h3>Daily News Collection</h3>
<pre><code># Morning routine: fetch all news
./capcat bundle news --count 20 --html

# Evening: fetch tech updates
./capcat bundle tech --count 10
</code></pre>

<h3>Research Workflow</h3>
<pre><code># Collect science articles with all media
./capcat bundle science --count 30 --media --log-file research.log

# Add specific article found during research
./capcat single https://nature.com/article/12345 --media --html
</code></pre>

<h3>Source Management Workflow</h3>
<pre><code># List current sources
./capcat list sources

# Add new source
./capcat add-source --url https://newssite.com/feed.xml

# Test new source
./capcat fetch newsource --count 3

# Remove old sources
./capcat remove-source --batch old-sources.txt
</code></pre>

<h3>Automated Collection Script</h3>
<pre><code>#!/bin/bash
# Daily collection script

LOG_FILE=&quot;logs/daily-$(date +%Y%m%d).log&quot;

# Collect from all bundles
./capcat bundle --all --count 20 --html --log-file &quot;$LOG_FILE&quot;

# Check if successful
if [ $? -eq 0 ]; then
    echo &quot;Collection successful&quot; &gt;&gt; &quot;$LOG_FILE&quot;
else
    echo &quot;Collection failed&quot; &gt;&gt; &quot;$LOG_FILE&quot;
    exit 1
fi
</code></pre>

<h2>Exit Codes</h2>

<p>All commands return standard exit codes:</p>

<ul>
<li><code>0</code> - Success (all operations completed)</li>
<li><code>1</code> - General error (command failed)</li>
<li><code>2</code> - Invalid arguments (validation failed)</li>
<li><code>130</code> - User interrupt (Ctrl+C pressed)</li>
</ul>

<h4>Usage in scripts:</h4>
<pre><code>./capcat fetch hn --count 10
if [ $? -eq 0 ]; then
    echo &quot;Success&quot;
else
    echo &quot;Failed&quot;
    exit 1
fi
</code></pre>

<h2>Environment Variables</h2>

<p>Capcat respects these environment variables:</p>

<h3>CAPCAT_OUTPUT_DIR</h3>
<pre><code>export CAPCAT_OUTPUT_DIR=&quot;/custom/path&quot;
./capcat fetch hn
</code></pre>
<p>Override default output directory for all commands.</p>

<h3>CAPCAT_DEFAULT_COUNT</h3>
<pre><code>export CAPCAT_DEFAULT_COUNT=50
./capcat fetch hn  # Uses 50 instead of 30
</code></pre>
<p>Override default article count.</p>

<h3>CAPCAT_CONFIG</h3>
<pre><code>export CAPCAT_CONFIG=&quot;~/.capcat/custom.yml&quot;
./capcat fetch hn
</code></pre>
<p>Override default configuration file location.</p>

<h3>CAPCAT_LOG_LEVEL</h3>
<pre><code>export CAPCAT_LOG_LEVEL=DEBUG
./capcat fetch hn
</code></pre>
<p>Set logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL</p>

<h3>CAPCAT_MAX_WORKERS</h3>
<pre><code>export CAPCAT_MAX_WORKERS=16
./capcat bundle all
</code></pre>
<p>Override parallel worker count.</p>

<h2>Configuration Priority</h2>

<p>Settings are applied in this order (highest to lowest priority):</p>

<ol>
<li>Command-line arguments (<code>--count 10</code>)</li>
<li>Environment variables (<code>CAPCAT_DEFAULT_COUNT=10</code>)</li>
<li>Configuration file (<code>capcat.yml: default_count: 10</code>)</li>
<li>Default values (hard-coded: 30)</li>
</ol>

<h4>Example:</h4>
<pre><code># capcat.yml has: default_count: 20
# Environment: CAPCAT_DEFAULT_COUNT=40
# Command: --count 10

./capcat fetch hn  # Uses 10 (CLI wins)
</code></pre>

<h2>Error Handling</h2>

<h3>Network Errors</h3>
<pre><code>$ ./capcat fetch hn
Error: Failed to connect to news.ycombinator.com
Network timeout after 10 seconds
</code></pre>

<h3>Invalid Source</h3>
<pre><code>$ ./capcat fetch nonexistent
Error: Unknown sources: nonexistent
Available: hn, lb, iq, bbc, guardian, ...
</code></pre>

<h3>Invalid URL</h3>
<pre><code>$ ./capcat single not-a-url
Error: Invalid URL format: not-a-url
Must start with http:// or https://
</code></pre>

<h3>Permission Denied</h3>
<pre><code>$ ./capcat fetch hn --output /root/articles
Error: Permission denied: /root/articles
Cannot create output directory
</code></pre>

<h3>Disk Space</h3>
<pre><code>$ ./capcat bundle all --media
Warning: Low disk space (&lt; 1GB available)
Consider using --no-media flag
</code></pre>

<h2>Debugging Commands</h2>

<h3>Verbose Output</h3>
<pre><code># Maximum verbosity with file logging
./capcat -V --log-file debug.log fetch hn --count 3
</code></pre>

<h3>Dry Run (Remove Command)</h3>
<pre><code># Preview what would be removed
./capcat remove-source --dry-run
</code></pre>

<h3>Test Single Article</h3>
<pre><code># Test article processing
./capcat single URL --verbose
</code></pre>

<h3>List and Verify Sources</h3>
<pre><code># Check source availability
./capcat list sources
</code></pre>

<h3>Configuration Validation</h3>
<pre><code># Show current config
./capcat config --show
</code></pre>

<h2>Source Code Locations</h2>

<p>All CLI functionality implemented in:</p>
<ul>
<li>Application/cli.py - Argument parsing, subcommands</li>
<li>Application/capcat.py - Main application logic</li>
<li>Application/core/ - Core processing modules</li>
</ul>

<p>Function reference:</p>
<ul>
<li><code>create_parser()</code> - Application/cli.py:501 - Parser creation</li>
<li><code>parse_arguments()</code> - Application/cli.py - Argument parsing</li>
<li><code>validate_arguments()</code> - Application/cli.py:756 - Validation</li>
<li><code>process_sources()</code> - Application/capcat.py:55 - Source processing</li>
<li><code>add_source()</code> - Application/cli.py:200 - Add source command</li>
<li><code>remove_source()</code> - Application/cli.py:339 - Remove source command</li>
<li><code>generate_config_command()</code> - Application/cli.py:457 - Config generation</li>
</ul>

<h2>Related Documentation</h2>

<ul>
<li>Interactive Mode: docs/tutorials/02-interactive-mode-exhaustive.md</li>
<li>Configuration: docs/tutorials/03-configuration-exhaustive.md</li>
<li>Source System: docs/tutorials/04-source-system-exhaustive.md</li>
<li>API Reference: docs/api-reference.md</li>
</ul>


<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({
    startOnLoad: true,
    theme: 'base',
    themeVariables: {
      // Primary colors from design system (Capcat orange palette)
      primaryColor: '#FFD4B7',           // --orange-200
      primaryTextColor: '#201419',       // --ink
      primaryBorderColor: '#F1540E',     // --orange-500 / --accent-primary

      // Line and edge colors
      lineColor: '#58444c',              // --ink-medium

      // Secondary colors
      secondaryColor: '#FFEADB',         // --orange-100
      tertiaryColor: '#f9f8ed',          // --accent-cream-primary

      // Text colors
      textColor: '#201419',              // --ink
      mainBkg: '#FAF8EE',                // --cream

      // Node styling
      nodeBorder: '#F1540E',             // --accent-primary
      clusterBkg: '#faf2e7',             // --accent-cream-light
      clusterBorder: '#D44400',          // --orange-600 / --accent-hover

      // Font
      fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',
      fontSize: '16px'
    },
    flowchart: {
      nodeSpacing: 50,
      rankSpacing: 50,
      padding: 15,
      useMaxWidth: true,
      htmlLabels: true,
      curve: 'basis'
    }
  });

  // Add copy buttons to Mermaid diagrams after rendering
  document.addEventListener('DOMContentLoaded', function() {
    const mermaidDivs = document.querySelectorAll('.mermaid');

    mermaidDivs.forEach(function(mermaidDiv) {
      // Get the original Mermaid source code
      const mermaidSource = mermaidDiv.textContent;

      // Create container wrapper
      const container = document.createElement('div');
      container.className = 'mermaid-container';

      // Create copy button
      const copyBtn = document.createElement('button');
      copyBtn.className = 'mermaid-copy-btn';
      copyBtn.textContent = 'Copy Mermaid Code';
      copyBtn.setAttribute('title', 'Copy diagram code for Draw.io, Mermaid Live, etc.');

      copyBtn.addEventListener('click', function() {
        navigator.clipboard.writeText(mermaidSource).then(function() {
          copyBtn.textContent = 'Copied!';
          copyBtn.classList.add('copied');

          setTimeout(function() {
            copyBtn.textContent = 'Copy Mermaid Code';
            copyBtn.classList.remove('copied');
          }, 2000);
        });
      });

      // Wrap the mermaid div in container and add button
      mermaidDiv.parentNode.insertBefore(container, mermaidDiv);
      container.appendChild(mermaidDiv);
      container.appendChild(copyBtn);
    });
  });
</script>
    <script src="../../js/main.js"></script>

            
<nav class="chapter-navigation" aria-label="Chapter navigation">
    <div class="next-chapter-content">
        <span class="next-chapter-label">Next Chapter</span>
        <span class="next-chapter-arrow" aria-hidden="true">→</span>
        <a href="02-interactive-mode-exhaustive.html" class="next-chapter-link" rel="next">Tutorial 2: Interactive Mode (Comprehensive)</a>
    </div>
</nav>
</div>
        </div>
    </div>

    <!-- Footer -->
    {% include footer.html %}

    <!-- Back to Top Button -->
    <button id="backToTopBtn" title="Go to top">
        <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">
            <path d="M0 0h24v24H0V0z" fill="none"/>
            <path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41z"/>
        </svg>
    </button>  </body>
